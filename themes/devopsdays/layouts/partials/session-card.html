{{/*
Session Card Partial
Renders a session card with consistent styling
Usage: {{ partial "session-card.html" (dict "session" . "context" $) }}
*/}}

{{ $session := .session }}
{{ $ctx := .context }}
{{ $styling := partial "session-type-styling.html" $session.type }}
{{ $hasDetailPage := and $session.speakers (gt (len $session.speakers) 0) }}

{{ if $hasDetailPage }}
<a href="/sessions/{{ $session.id }}/" class="block group">
    {{ end }}
    <div
        class="bg-{{ $styling.bgColor }} rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 border-l-4 border-{{ $styling.borderColor }}-500 {{ if $hasDetailPage }}group-hover:shadow-xl{{ end }}">
        <div class="p-4">
            <div class="flex flex-col">
                <div class="flex flex-wrap items-center mb-2">
                    <span class="text-sm font-bold text-gray-800 mr-3">{{ $session.time }}</span>
                    {{ if $styling.showLabel }}
                    <span
                        class="px-2 py-1 text-xs font-medium rounded-full bg-{{ $styling.textColor }}-100 text-{{ $styling.textColor }}-800">
                        {{ $styling.icon }} {{ $styling.typeName }}
                    </span>
                    {{ end }}
                    {{ if $hasDetailPage }}
                    <span class="ml-auto text-xs text-gray-500 group-hover:text-gray-700">
                        View Details â†’
                    </span>
                    {{ end }}
                </div>
                <h4
                    class="text-lg font-bold mb-2 text-gray-900 leading-tight {{ if $hasDetailPage }}group-hover:text-cerulean{{ end }}">
                    {{ $session.title }}
                </h4>

                <!-- Speakers -->
                {{ if $session.speakers }}
                <div class="flex flex-wrap items-center gap-2 mt-2">
                    {{ range $session.speakers }}
                    {{ $speaker := index (where $ctx.Site.Data.speakers.speakers "id" .) 0 }}
                    {{ if $speaker }}
                    <div class="flex items-center rounded-lg p-2 hover:bg-black/5 transition-colors">
                        <img src="{{ $speaker.image }}" alt="{{ $speaker.name }}"
                            class="w-8 h-8 rounded-full object-cover border-2 border-white shadow-sm">
                        <div class="ml-2">
                            <p class="font-semibold text-gray-900 text-xs">{{ $speaker.name }}</p>
                        </div>
                    </div>
                    {{ end }}
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </div>
    </div>
    {{ if $hasDetailPage }}
</a>
{{ end }}